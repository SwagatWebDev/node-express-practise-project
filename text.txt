@Override
    public Page<EventLogDto> getEventLog(Pageable pageable) {
        Page<EventLogProjection> eventLogData = eventLogRepository.getEventLogData(pageable);

        Map<String, EventLogProjection> latestRecords = new LinkedHashMap<>();

        for (EventLogProjection event : eventLogData) {
            String key = event.getName() + "_" + event.getPath();

            LocalDateTime eventDateTime = LocalDateTime.parse(event.getEventCreatedDate(), DateTimeFormatter.ISO_DATE_TIME);

            if (!latestRecords.containsKey(key) || 
                latestRecords.get(key).getEventCreatedDate().isBefore(eventDateTime)) {
                latestRecords.put(key, event);
            }
        }

        List<EventLogDto> eventLogDtoList = latestRecords.values().stream()
                .map(this::mapToEventLogDto)
                .collect(Collectors.toList());

        return new PageImpl<>(eventLogDtoList, pageable, eventLogData.getTotalElements());
    }

    private EventLogDto mapToEventLogDto(EventLogProjection event) {
        EventLogDto eventLogDto = new EventLogDto();
        eventLogDto.setName(event.getName());
        eventLogDto.setEventCreatedDate(event.getEventCreatedDate());
        eventLogDto.setChangedBy(event.getChangedBy());
        eventLogDto.setAssetType(event.getAssetType());
        eventLogDto.setEventType(getEventType(event.getEventType()));
        eventLogDto.setNewValue(getProcessedNewValue(event.getNewValue(), eventLogDto.getEventType()));
        eventLogDto.setFullPathName(event.getFullPathName());

        // Set oldValue to the value on the day it was created (day-based starting time)
        eventLogDto.setOldValue(getOldValueOnCreationDay(event));

        return eventLogDto;
    }

    private String getOldValueOnCreationDay(EventLogProjection event) {
        LocalDate creationDay = event.getEventCreatedDate().toLocalDate();
        LocalDate eventDay = LocalDate.parse(event.getEventCreatedDate().toLocalDate().toString());
        
        // If the creation day is the same, use the original value, otherwise, use an empty string or some default value
        return creationDay.equals(eventDay) ? event.getOldValue() : "";
    }
